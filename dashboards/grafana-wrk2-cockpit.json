{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"slug":"wrk2-benchmark-cockpit","expires":"0001-01-01T00:00:00Z","created":"2020-07-09T08:31:12Z","updated":"2020-07-10T12:08:59Z","updatedBy":"admin","createdBy":"admin","version":67,"hasAcl":false,"isFolder":false,"folderId":0,"folderTitle":"General","folderUrl":"","provisioned":false,"provisionedExternalId":""},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":26,"iteration":1594382922735,"links":[],"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":8,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"wrk2_benchmark_progress{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"legendFormat":"{{exported_instance}} of {{exported_job}}","refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"","transparent":true,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"name"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":11,"w":10,"x":6,"y":0},"hiddenSeries":false,"id":4,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(wrk2_benchmark_average_rps{exported_instance=\"$instance\",exported_job=\"$run\"})","instant":false,"legendFormat":"Average RPS","refId":"A"},{"expr":"sum(wrk2_benchmark_current_rps{exported_instance=\"$instance\",exported_job=\"$run\"})","instant":false,"legendFormat":"Current RPS","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Overall RPS (average and current)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transparent":true,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":5,"w":8,"x":16,"y":0},"hiddenSeries":false,"id":15,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"wrk2_benchmark_current_rps{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":false,"legendFormat":"{{thread}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Current RPS, per thread","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transparent":true,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":null,"gridPos":{"h":2,"w":6,"x":0,"y":3},"id":13,"options":{"displayMode":"lcd","fieldOptions":{"calcs":["lastNotNull"],"defaults":{"mappings":[],"max":100,"min":0,"thresholds":[{"color":"green","value":null},{"color":"red","value":80}]},"override":{},"values":false},"orientation":"horizontal"},"pluginVersion":"6.5.0","targets":[{"expr":"wrk2_benchmark_progress{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Benchmark Run Progress","transparent":true,"type":"bargauge"},{"cacheTimeout":null,"datasource":null,"gridPos":{"h":3,"w":6,"x":0,"y":5},"id":2,"links":[],"options":{"fieldOptions":{"calcs":["lastNotNull"],"defaults":{"mappings":[{"id":0,"op":"=","text":"N/A","type":1,"value":"null"}],"max":100,"min":0,"nullValueMode":"connected","thresholds":[{"color":"green","value":null},{"color":"red","value":80}],"unit":"none"},"override":{},"values":false},"orientation":"horizontal","showThresholdLabels":false,"showThresholdMarkers":true},"pluginVersion":"6.5.0","targets":[{"expr":"wrk2_benchmark_requested_rps{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"legendFormat":"Requested RPS","refId":"A"},{"expr":"sum(wrk2_benchmark_average_rps{exported_instance=\"$instance\",exported_job=\"$run\"})","instant":true,"legendFormat":"Average RPS","refId":"B"},{"expr":"sum(wrk2_benchmark_current_rps{exported_instance=\"$instance\",exported_job=\"$run\"})","instant":true,"legendFormat":"Current RPS","refId":"C"}],"timeFrom":null,"timeShift":null,"title":"","transparent":true,"type":"gauge"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"decimals":1,"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":8,"x":16,"y":5},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"dataLinks":[]},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"wrk2_benchmark_average_rps{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":false,"legendFormat":"{{thread}}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Average RPS, per thread","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transparent":true,"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":2,"x":0,"y":8},"id":10,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(wrk2_benchmark_requests{exported_instance=\"$instance\",exported_job=\"$run\"})","instant":true,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Requests sent","transparent":true,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":2,"x":2,"y":8},"id":11,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"sum(wrk2_benchmark_responses{exported_instance=\"$instance\",exported_job=\"$run\"})","instant":true,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Responses received","transparent":true,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"content":"```\n\n\n```\n\n##### Benchmark results (updated after a benchmark run has concluded.)\n\n","datasource":null,"gridPos":{"h":3,"w":24,"x":0,"y":11},"id":20,"mode":"markdown","options":{},"timeFrom":null,"timeShift":null,"title":"","transparent":true,"type":"text"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":2,"x":0,"y":14},"id":28,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"wrk2_benchmark_run_rps{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Effective RPS","transparent":true,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"columns":[],"datasource":null,"fontSize":"100%","gridPos":{"h":7,"w":3,"x":2,"y":14},"id":22,"options":{},"pageSize":null,"showHeader":true,"sort":{"col":0,"desc":true},"styles":[{"alias":"","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":null,"link":false,"mappingType":1,"pattern":"Time","thresholds":[],"type":"hidden","unit":"short"},{"alias":"","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"expr":"wrk2_benchmark_socket_errors{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"legendFormat":"Socket {{t}}","refId":"A"},{"expr":"wrk2_benchmark_http_errors{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"legendFormat":"HTTP errors (ret != 200)","refId":"B"},{"expr":"wrk2_benchmark_requests_timed_out{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"legendFormat":"Requests timed out","refId":"C"}],"timeFrom":null,"timeShift":null,"title":"Transport Errors","transform":"timeseries_to_rows","transparent":true,"type":"table"},{"columns":[],"datasource":null,"fontSize":"100%","gridPos":{"h":7,"w":4,"x":5,"y":14},"id":24,"options":{},"pageSize":null,"showHeader":true,"sort":{"col":0,"desc":true},"styles":[{"alias":"Time","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"expr":"wrk2_benchmark_url_call_count{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"legendFormat":"{{url}}","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"URL call counts","transform":"timeseries_to_rows","transparent":true,"type":"table"},{"datasource":null,"gridPos":{"h":7,"w":15,"x":9,"y":14},"id":17,"options":{"displayMode":"gradient","fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":3,"mappings":[],"max":1000,"min":0,"thresholds":[{"color":"green","value":null},{"color":"#EAB839","value":600},{"color":"red","value":1000}],"unit":"ms"},"override":{},"values":false},"orientation":"vertical"},"pluginVersion":"6.5.0","targets":[{"expr":"wrk2_benchmark_latency_ms{exported_instance=\"$instance\",exported_job=\"$run\"}","format":"time_series","instant":true,"intervalFactor":1,"legendFormat":"{{p}} percentile","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Latency  percentile histogram (milliseconds)","transparent":true,"type":"bargauge"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":null,"format":"none","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":2,"x":0,"y":16},"id":27,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"wrk2_benchmark_run_requests{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Requests sent","transparent":true,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["#299c46","rgba(237, 129, 40, 0.89)","#d44a3a"],"datasource":null,"format":"decbytes","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"gridPos":{"h":2,"w":2,"x":0,"y":18},"id":26,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"options":{},"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false,"ymax":null,"ymin":null},"tableColumn":"","targets":[{"expr":"wrk2_benchmark_bytes_read{exported_instance=\"$instance\",exported_job=\"$run\"}","instant":true,"refId":"A"}],"thresholds":"","timeFrom":null,"timeShift":null,"title":"Total bytes read","transparent":true,"type":"singlestat","valueFontSize":"80%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"datasource":null,"gridPos":{"h":49,"w":24,"x":0,"y":21},"id":18,"options":{"displayMode":"gradient","fieldOptions":{"calcs":["lastNotNull"],"defaults":{"decimals":3,"mappings":[],"max":1000,"min":0,"thresholds":[{"color":"green","value":null},{"color":"#EAB839","value":600},{"color":"red","value":1000}],"unit":"ms"},"override":{},"values":false},"orientation":"horizontal"},"pluginVersion":"6.5.0","targets":[{"expr":"wrk2_benchmark_latency_detailed_ms{exported_instance=\"$instance\",exported_job=\"$run\"}","format":"time_series","instant":true,"intervalFactor":1,"legendFormat":"{{p}} percentile","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Detailed latency  percentile histogram (milliseconds)","transparent":true,"type":"bargauge"}],"refresh":"1s","schemaVersion":21,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"isNone":true,"selected":false,"text":"None","value":""},"datasource":"Prometheus","definition":"wrk2_benchmark_progress","hide":0,"includeAll":false,"label":"benchmark instance","multi":false,"name":"instance","options":[],"query":"wrk2_benchmark_progress","refresh":1,"regex":"/.*exported_instance=\"([^\"]*).*/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"tags":[],"text":"wrk2_bench_test","value":"wrk2_bench_test"},"datasource":"Prometheus","definition":"wrk2_benchmark_progress","hide":0,"includeAll":false,"label":"benchmark run","multi":false,"name":"run","options":[],"query":"wrk2_benchmark_progress","refresh":1,"regex":"/.*exported_job=\"([^\"]*).*/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["1s","5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"wrk2 benchmark cockpit","uid":null,"version":67}}